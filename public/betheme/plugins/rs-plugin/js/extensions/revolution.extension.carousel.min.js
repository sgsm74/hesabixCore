/********************************************
 * REVOLUTION 5.0 EXTENSION - CAROUSEL
 * @version: 1.0.2 (01.10.2015)
 * @requires jquery.themepunch.revolution.js
 * @author ThemePunch
*********************************************/
!function(){var e=jQuery.fn.revolution;jQuery.extend(!0,e,{prepareCarousel:function(t,l,o){o=t.carousel.lastdirection=a(o,t.carousel.lastdirection),i(t),t.carousel.slide_offset_target=r(t),null==l?e.carouselToEvalPosition(t,o):s(t,o,!1)},carouselToEvalPosition:function(t,i){var l=t.carousel;i=l.lastdirection=a(i,l.lastdirection);var o="center"===l.horizontal_align?(l.wrapwidth/2-l.slide_width/2-l.slide_globaloffset)/l.slide_width:(0-l.slide_globaloffset)/l.slide_width,r=e.simp(o,t.slideamount,!1),n=r-Math.floor(r),d=0,f=-1*(Math.ceil(r)-r),h=-1*(Math.floor(r)-r);d=n>=.3&&"right"===i||n>=.7&&"left"===i?f:.3>n&&"right"===i||.7>n&&"left"===i?h:d,d="off"===l.infinity?0>r?r:o>t.slideamount-1?o-(t.slideamount-1):d:d,l.slide_offset_target=d*l.slide_width,0!==Math.abs(l.slide_offset_target)?s(t,i,!0):e.organiseCarousel(t,i)},organiseCarousel:function(e,t,i,a){t=void 0===t||"down"==t||"up"==t||null===t||jQuery.isEmptyObject(t)?"right":t;for(var s=e.carousel,l=new Array,o=s.slides.length,r=("left"===s.horizontal_align&&e.width,0);o>r;r++){var n=r*s.slide_width+s.slide_offset;"on"===s.infinity&&(n=n>s.wrapwidth-s.inneroffset&&"left"==t?s.slide_offset-(s.slides.length-r)*s.slide_width:n,n=n<0-s.inneroffset-s.slide_width&&"right"==t?n+s.maxwidth:n),l[r]=n}var d=999;s.slides&&jQuery.each(s.slides,function(a,r){var n=l[a];"on"===s.infinity&&(n=n>s.wrapwidth-s.inneroffset&&"right"===t?l[0]-(o-a)*s.slide_width:n,n=n<0-s.inneroffset-s.slide_width?"right"==t?n+s.maxwidth:"left"===t?l[o-1]+(a+1)*s.slide_width:n:n);var f=new Object;f.right=n+s.inneroffset;var h="center"===s.horizontal_align?(Math.abs(s.wrapwidth/2)-(f.right+s.slide_width/2))/s.slide_width:(s.inneroffset-f.right)/s.slide_width,w="center"===s.horizontal_align?2:1;if((i&&Math.abs(h)<d||0===h)&&(d=Math.abs(h),s.focused=a),f.width=s.slide_width,f.x=0,f.transformPerspective=1200,f.transformOrigin="50% "+s.vertical_align,"on"===s.fadeout)if("on"===s.vary_fade)f.autoAlpha=1-Math.abs(1/Math.ceil(s.maxVisibleItems/w)*h);else switch(s.horizontal_align){case"center":f.autoAlpha=Math.abs(h)<Math.ceil(s.maxVisibleItems/w-1)?1:1-(Math.abs(h)-Math.floor(Math.abs(h)));break;case"right":f.autoAlpha=1>h&&h>0?1-h:Math.abs(h)>s.maxVisibleItems-1?1-(Math.abs(h)-(s.maxVisibleItems-1)):1;break;case"left":f.autoAlpha=h>-1&&0>h?1-Math.abs(h):h>s.maxVisibleItems-1?1-(Math.abs(h)-(s.maxVisibleItems-1)):1}else f.autoAlpha=Math.abs(h)<Math.ceil(s.maxVisibleItems/w)?1:0;void 0!==s.minScale&&s.minScale>0&&("on"===s.vary_scale?(f.scale=1-Math.abs(s.minScale/100/Math.ceil(s.maxVisibleItems/w)*h),s.slide_width,s.slide_width,f.scale,Math.abs(h)):(f.scale=h>=1||-1>=h?1-s.minScale/100:(100-s.minScale*Math.abs(h))/100,s.slide_width,s.slide_width,s.minScale,Math.abs(h))),void 0!==s.maxRotation&&0!=Math.abs(s.maxRotation)&&("on"===s.vary_rotation?(f.rotationY=Math.abs(s.maxRotation)-Math.abs((1-Math.abs(1/Math.ceil(s.maxVisibleItems/w)*h))*s.maxRotation),f.autoAlpha=Math.abs(f.rotationY)>90?0:f.autoAlpha):f.rotationY=h>=1||-1>=h?s.maxRotation:Math.abs(h)*s.maxRotation,f.rotationY=0>h?-1*f.rotationY:f.rotationY),f.x=1*s.space*h,f.right=Math.floor(f.right),f.x=Math.floor(f.x),f.scale,f.x,f.zIndex=Math.round(100-Math.abs(5*h)),f.transformStyle="3D"!=e.parallax.type&&"3d"!=e.parallax.type?"flat":"preserve-3d",punchgs.TweenLite.set(r,f)}),a&&(e.c.find(".next-revslide").removeClass("next-revslide"),jQuery(s.slides[s.focused]).addClass("next-revslide"),e.c.trigger("revolution.nextslide.waiting")),s.wrapwidth,s.slide_offset,s.maxwidth,s.slide_offset,s.wrapwidth}});var t=function(e){var t=e.carousel;t.infbackup=t.infinity,t.maxVisiblebackup=t.maxVisibleItems,t.slide_globaloffset="none",t.slide_offset=0,t.wrap=e.c.find(".tp-carousel-wrapper"),t.slides=e.c.find(".tp-revslider-slidesli"),0!==t.maxRotation&&("3D"!=e.parallax.type&&"3d"!=e.parallax.type?punchgs.TweenLite.set(t.wrap,{perspective:1200,transformStyle:"flat"}):punchgs.TweenLite.set(t.wrap,{perspective:1600,transformStyle:"preserve-3d"})),void 0!==t.border_radius&&parseInt(t.border_radius,0)>0&&punchgs.TweenLite.set(e.c.find(".tp-revslider-slidesli"),{borderRadius:t.border_radius})},i=function(i){void 0===i.bw&&e.setSize(i);var a=i.carousel,s=e.getHorizontalOffset(i.c,"right"),l=e.getHorizontalOffset(i.c,"left");void 0===a.wrap&&t(i),a.slide_width="on"!==a.stretch?i.gridwidth[i.curWinRange]*i.bw:i.c.width(),a.maxwidth=i.slideamount*a.slide_width,a.maxVisiblebackup>a.slides.length+1&&(a.maxVisibleItems=a.slides.length+2),a.wrapwidth=a.maxVisibleItems*a.slide_width+(a.maxVisibleItems-1)*a.space,a.wrapwidth="auto"!=i.sliderLayout?a.wrapwidth>i.c.closest(".tp-simpleresponsive").width()?i.c.closest(".tp-simpleresponsive").width():a.wrapwidth:a.wrapwidth>i.ul.width()?i.ul.width():a.wrapwidth,a.infinity=a.wrapwidth>=a.maxwidth?"off":a.infbackup,a.wrapoffset="center"===a.horizontal_align?(i.c.width()-l-s-a.wrapwidth)/2:0,a.wrapoffset="auto"!=i.sliderLayout&&i.outernav?0:a.wrapoffset<s?s:a.wrapoffset;var o="hidden";("3D"==i.parallax.type||"3d"==i.parallax.type)&&(o="visible"),"left"===a.horizontal_align?punchgs.TweenLite.set(a.wrap,{right:"auto",left:a.wrapoffset+"px",width:a.wrapwidth,overflow:o}):punchgs.TweenLite.set(a.wrap,{left:"auto",right:a.wrapoffset+"px",width:a.wrapwidth,overflow:o}),a.inneroffset="left"===a.horizontal_align?a.wrapwidth-a.slide_width:0,a.realoffset=Math.abs(a.wrap.position().left),a.windhalf=jQuery(window).width()/2},a=function(e,t){return null===e||jQuery.isEmptyObject(e)?t:void 0===e?"left":e},s=function(t,i,s){var l=t.carousel;i=l.lastdirection=a(i,l.lastdirection);var o=new Object;o.from=0,o.to=l.slide_offset_target,void 0!==l.positionanim&&l.positionanim.pause(),l.positionanim=punchgs.TweenLite.to(o,1.2,{from:o.to,onUpdate:function(){l.slide_offset=l.slide_globaloffset+o.from,l.slide_offset=e.simp(l.slide_offset,l.maxwidth),e.organiseCarousel(t,i,!1,!1)},onComplete:function(){l.slide_globaloffset="off"===l.infinity?l.slide_globaloffset+l.slide_offset_target:e.simp(l.slide_globaloffset+l.slide_offset_target,l.maxwidth),l.slide_offset=e.simp(l.slide_offset,l.maxwidth),e.organiseCarousel(t,i,!1,!0);var a=jQuery(t.li[l.focused]);t.c.find(".next-revslide").removeClass("next-revslide"),s&&e.callingNewSlide(t,t.c,a.data("index"))},ease:punchgs.Expo.easeOut})},l=function(e,t){return Math.abs(e)>Math.abs(t)?e>0?e-Math.abs(Math.floor(e/t)*t):e+Math.abs(Math.floor(e/t)*t):e},o=function(e,t,i){var a=t-e,s=t-i-e;return a=l(a,i),s=l(s,i),Math.abs(a)>Math.abs(s)?s:a},r=function(t){var i=0,a=t.carousel;if(void 0!==a.positionanim&&a.positionanim.kill(),"none"==a.slide_globaloffset)a.slide_globaloffset=i="center"===a.horizontal_align?a.wrapwidth/2-a.slide_width/2:0;else{a.slide_globaloffset=a.slide_offset,a.slide_offset=0;var s=t.c.find(".processing-revslide").index(),l="center"===a.horizontal_align?(a.wrapwidth/2-a.slide_width/2-a.slide_globaloffset)/a.slide_width:(0-a.slide_globaloffset)/a.slide_width;l=e.simp(l,t.slideamount,!1),s=s>=0?s:t.c.find(".active-revslide").index(),s=s>=0?s:0,i="off"===a.infinity?l-s:-o(l,s,t.slideamount),i*=a.slide_width}return i}}(jQuery);