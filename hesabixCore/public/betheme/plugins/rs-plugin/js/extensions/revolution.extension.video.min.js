/********************************************
 * REVOLUTION 5.1 EXTENSION - VIDEO FUNCTIONS
 * @version: 1.2.1 (26.11.2015)
 * @requires jquery.themepunch.revolution.js
 * @author ThemePunch
*********************************************/
!function(e){function t(e){return null==e?-1:jQuery.isNumeric(e)?e:e.split(":").length>1?60*parseInt(e.split(":")[0],0)+parseInt(e.split(":")[1],0):e}var a=jQuery.fn.revolution,i=a.is_mobile();jQuery.extend(!0,a,{resetVideo:function(e,d){switch(e.data("videotype")){case"youtube":e.data("player");try{if("on"==e.data("forcerewind")&&!i){var o=t(e.data("videostartat"));o=-1==o?0:o,null!=e.data("player")&&(e.data("player").seekTo(o),e.data("player").pauseVideo())}}catch(e){}0==e.find(".tp-videoposter").length&&punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"vimeo":var n=$f(e.find("iframe").attr("id"));try{"on"!=e.data("forcerewind")||i||(o=t(e.data("videostartat")),o=-1==o?0:o,n.api("seekTo",o),n.api("pause"))}catch(e){}0==e.find(".tp-videoposter").length&&punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"html5":if(i&&1==e.data("disablevideoonmobile"))return!1;var r=e.find("video"),l=r[0];if(punchgs.TweenLite.to(r,.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"on"==e.data("forcerewind")&&!e.hasClass("videoisplaying"))try{o=t(e.data("videostartat")),l.currentTime=-1==o?0:o}catch(e){}("mute"==e.data("volume")||a.lastToggleState(e.data("videomutetoggledby")))&&(l.muted=!0)}},isVideoMuted:function(e,t){var a=!1;switch(e.data("videotype")){case"youtube":try{var i=e.data("player");a=i.isMuted()}catch(e){}break;case"vimeo":try{$f(e.find("iframe").attr("id")),"mute"==e.data("volume")&&(a=!0)}catch(e){}break;case"html5":var d=e.find("video"),o=d[0];"mute"==e.data("volume")&&(o.muted=!0)}return a},muteVideo:function(e,t){switch(e.data("videotype")){case"youtube":try{var a=e.data("player");a.mute()}catch(e){}break;case"vimeo":try{var i=$f(e.find("iframe").attr("id"));e.data("volume","mute"),i.api("setVolume",0)}catch(e){}break;case"html5":var d=e.find("video"),o=d[0];o.muted=!0}},unMuteVideo:function(e,t){switch(e.data("videotype")){case"youtube":try{var a=e.data("player");a.unMute()}catch(e){}break;case"vimeo":try{var i=$f(e.find("iframe").attr("id"));e.data("volume","1"),i.api("setVolume",1)}catch(e){}break;case"html5":var d=e.find("video"),o=d[0];o.muted=!1}},stopVideo:function(e,t){switch(e.data("videotype")){case"youtube":try{var a=e.data("player");a.pauseVideo()}catch(e){}break;case"vimeo":try{var i=$f(e.find("iframe").attr("id"));i.api("pause")}catch(e){}break;case"html5":var d=e.find("video"),o=d[0];o.pause()}},playVideo:function(e,o){switch(clearTimeout(e.data("videoplaywait")),e.data("videotype")){case"youtube":if(0==e.find("iframe").length)e.append(e.data("videomarkup")),n(e,o,!0);else if(null!=e.data("player").playVideo){var r=t(e.data("videostartat")),l=e.data("player").getCurrentTime();1==e.data("nextslideatend-triggered")&&(l=-1,e.data("nextslideatend-triggered",0)),-1!=r&&r>l&&e.data("player").seekTo(r),e.data("player").playVideo()}else e.data("videoplaywait",setTimeout(function(){a.playVideo(e,o)},50));break;case"vimeo":if(0==e.find("iframe").length)e.append(e.data("videomarkup")),n(e,o,!0);else if(e.hasClass("rs-apiready")){var s=e.find("iframe").attr("id"),u=$f(s);null==u.api("play")?e.data("videoplaywait",setTimeout(function(){a.playVideo(e,o)},50)):setTimeout(function(){u.api("play");var a=t(e.data("videostartat")),i=e.data("currenttime");1==e.data("nextslideatend-triggered")&&(i=-1,e.data("nextslideatend-triggered",0)),-1!=a&&a>i&&u.api("seekTo",a)},510)}else e.data("videoplaywait",setTimeout(function(){a.playVideo(e,o)},50));break;case"html5":if(i&&1==e.data("disablevideoonmobile"))return!1;var p=e.find("video"),c=p[0],v=p.parent();1!=v.data("metaloaded")?d(c,"loadedmetadata",function(e){a.resetVideo(e,o),c.play();var i=t(e.data("videostartat")),d=c.currentTime;1==e.data("nextslideatend-triggered")&&(d=-1,e.data("nextslideatend-triggered",0)),-1!=i&&i>d&&(c.currentTime=i)}(e)):(c.play(),r=t(e.data("videostartat")),l=c.currentTime,1==e.data("nextslideatend-triggered")&&(l=-1,e.data("nextslideatend-triggered",0)),-1!=r&&r>l&&(c.currentTime=r))}},isVideoPlaying:function(e,t){var a=!1;return null!=t.playingvideos&&jQuery.each(t.playingvideos,function(t,i){e.attr("id")==i.attr("id")&&(a=!0)}),a},prepareCoveredVideo:function(e,t,a){var i=a.find("iframe, video"),d=e.split(":")[0],o=e.split(":")[1],n=a.closest(".tp-revslider-slidesli"),r=n.width()/n.height(),l=d/o,s=r/l*100,u=l/r*100;r>l?punchgs.TweenLite.to(i,.001,{height:s+"%",width:"100%",top:-(s-100)/2+"%",right:"0px",position:"absolute"}):punchgs.TweenLite.to(i,.001,{width:u+"%",height:"100%",right:-(u-100)/2+"%",top:"0px",position:"absolute"})},checkVideoApis:function(e,t,a){var i="https:"===location.protocol?"https":"http";if((null!=e.data("ytid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&(t.youtubeapineeded=!0),(null!=e.data("ytid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&0==a.addedyt){t.youtubestarttime=jQuery.now(),a.addedyt=1;var d=document.createElement("script");d.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0],n=!0;jQuery("head").find("*").each(function(){"https://www.youtube.com/iframe_api"==jQuery(this).attr("src")&&(n=!1)}),n&&o.parentNode.insertBefore(d,o)}if((null!=e.data("vimeoid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&(t.vimeoapineeded=!0),(null!=e.data("vimeoid")||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&0==a.addedvim){t.vimeostarttime=jQuery.now(),a.addedvim=1;var r=document.createElement("script");o=document.getElementsByTagName("script")[0],n=!0,r.src=i+"://f.vimeocdn.com/js/froogaloop2.min.js",jQuery("head").find("*").each(function(){jQuery(this).attr("src")==i+"://a.vimeocdn.com/js/froogaloop2.min.js"&&(n=!1)}),n&&o.parentNode.insertBefore(r,o)}return a},manageVideoLayer:function(e,o,l,s){var u=e.data("videoattributes"),p=e.data("ytid"),c=e.data("vimeoid"),v=e.data("videpreload"),g=e.data("videomp4"),f=e.data("videowebm"),y=e.data("videoogv"),m=e.data("allowfullscreenvideo"),h=e.data("videocontrols"),b="http",w="loop"==e.data("videoloop")?"loop":"loopandnoslidestop"==e.data("videoloop")?"loop":"",T=null!=g||null!=f?"html5":null!=p&&String(p).length>1?"youtube":null!=c&&String(c).length>1?"vimeo":"none",k="html5"==T&&0==e.find("video").length?"html5":"youtube"==T&&0==e.find("iframe").length?"youtube":"vimeo"==T&&0==e.find("iframe").length?"vimeo":"none";switch(e.data("videotype",T),k){case"html5":"controls"!=h&&(h="");var x='<video style="object-fit:cover;background-size:cover;visible:hidden;width:100%; height:100%"  '+w+' preload="'+v+'">';null!=f&&"firefox"==a.get_browser().toLowerCase()&&(x=x+'<source src="'+f+'" type="video/webm" />'),null!=g&&(x=x+'<source src="'+g+'" type="video/mp4" />'),null!=y&&(x=x+'<source src="'+y+'" type="video/ogg" />'),x+="</video>";var L="";("true"===m||!0===m)&&(L='<div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-full-screen">Full-Screen</button></div>'),"controls"==h&&(x+='<div class="tp-video-controls"><div class="tp-video-button-wrap"><button type="button" class="tp-video-button tp-vid-play-pause">Play</button></div><div class="tp-video-seek-bar-wrap"><input  type="range" class="tp-seek-bar" value="0"></div><div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-mute">Mute</button></div><div class="tp-video-vol-bar-wrap"><input  type="range" class="tp-volume-bar" min="0" max="1" step="0.1" value="1"></div>'+L+"</div>"),e.data("videomarkup",x),e.append(x),(i&&1==e.data("disablevideoonmobile")||a.isIE(8))&&e.find("video").remove(),e.find("video").each(function(t){var i=this,n=jQuery(this);n.parent().hasClass("html5vid")||n.wrap('<div class="html5vid" style="position:relative;top:0px;right:0px;width:100%;height:100%; overflow:hidden;"></div>');var l=n.parent();1!=l.data("metaloaded")&&d(i,"loadedmetadata",function(e){r(e,o),a.resetVideo(e,o)}(e))});break;case"youtube":b="http","https:"===location.protocol&&(b="https"),"none"==h&&(u=u.replace("controls=1","controls=0"),-1==u.toLowerCase().indexOf("controls")&&(u+="&controls=0"));var V=t(e.data("videostartat")),P=t(e.data("videoendat"));-1!=V&&(u=u+"&start="+V),-1!=P&&(u=u+"&end="+P);var I=u.split("origin="+b+"://"),C="";I.length>1?(C=I[0]+"origin="+b+"://",self.location.href.match(/www/gi)&&!I[1].match(/www/gi)&&(C+="www."),C+=I[1]):C=u;var j="true"===m||!0===m?"allowfullscreen":"";e.data("videomarkup",'<iframe style="visible:hidden" src="'+b+"://www.youtube.com/embed/"+p+"?"+C+'" '+j+' width="100%" height="100%" style="width:100%;height:100%"></iframe>');break;case"vimeo":"https:"===location.protocol&&(b="https"),e.data("videomarkup",'<iframe style="visible:hidden" src="'+b+"://player.vimeo.com/video/"+c+"?"+u+'" webkitallowfullscreen mozallowfullscreen allowfullscreen width="100%" height="100%" style="100%;height:100%"></iframe>')}var _=i&&"on"==e.data("noposteronmobile");if(null!=e.data("videoposter")&&e.data("videoposter").length>2&&!_)0==e.find(".tp-videoposter").length&&e.append('<div class="tp-videoposter noSwipe" style="cursor:pointer; position:absolute;top:0px;right:0px;width:100%;height:100%;z-index:3;background-image:url('+e.data("videoposter")+'); background-size:cover;background-position:center center;"></div>'),0==e.find("iframe").length&&e.find(".tp-videoposter").on("click",function(){if(a.playVideo(e,o),i){if(1==e.data("disablevideoonmobile"))return!1;punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut})}});else{if(i&&1==e.data("disablevideoonmobile"))return!1;0!=e.find("iframe").length||"youtube"!=T&&"vimeo"!=T||(e.append(e.data("videomarkup")),n(e,o,!1))}"none"!=e.data("dottedoverlay")&&null!=e.data("dottedoverlay")&&1!=e.find(".tp-dottedoverlay").length&&e.append('<div class="tp-dottedoverlay '+e.data("dottedoverlay")+'"></div>'),e.addClass("HasListener"),1==e.data("bgvideo")&&punchgs.TweenLite.set(e.find("video, iframe"),{autoAlpha:0})}});var d=function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent(t,a,!1)},o=function(e,t,a){var i={};return i.video=e,i.videotype=t,i.settings=a,i},n=function(e,d,n){var r=e.find("iframe"),u="iframe"+Math.round(1e5*Math.random()+1),p=e.data("videoloop"),c="loopandnoslidestop"!=p;if(p="loop"==p||"loopandnoslidestop"==p,1==e.data("forcecover")){e.removeClass("fullscreenvideo").addClass("coverscreenvideo");var v=e.data("aspectratio");null!=v&&v.split(":").length>1&&a.prepareCoveredVideo(v,d,e)}if(1==e.data("bgvideo")&&(v=e.data("aspectratio"),null!=v&&v.split(":").length>1&&a.prepareCoveredVideo(v,d,e)),r.attr("id",u),n&&e.data("startvideonow",!0),1!==e.data("videolistenerexist"))switch(e.data("videotype")){case"youtube":var g=new YT.Player(u,{events:{onStateChange:function(e){var i=e.target.getVideoEmbedCode(),n=jQuery("#"+i.split('id="')[1].split('"')[0]),r=n.closest(".tp-simpleresponsive"),u=n.parent(),v=n.parent().data("player");if(e.data==YT.PlayerState.PLAYING)punchgs.TweenLite.to(u.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(u.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),"mute"==u.data("volume")||a.lastToggleState(u.data("videomutetoggledby"))?v.mute():(v.unMute(),v.setVolume(parseInt(u.data("volume"),0)||75)),d.videoplaying=!0,l(u,d),c?d.c.trigger("stoptimer"):d.videoplaying=!1,d.c.trigger("revolution.slide.onvideoplay",o(v,"youtube",u.data())),a.toggleState(u.data("videotoggledby"));else{if(0==e.data&&p){var g=t(u.data("videostartat"));-1!=g&&v.seekTo(g),v.playVideo(),a.toggleState(u.data("videotoggledby"))}(0==e.data||2==e.data)&&"on"==u.data("showcoveronpause")&&u.find(".tp-videoposter").length>0&&(punchgs.TweenLite.to(u.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(u.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),-1!=e.data&&3!=e.data&&(d.videoplaying=!1,s(u,d),r.trigger("starttimer"),d.c.trigger("revolution.slide.onvideostop",o(v,"youtube",u.data())),(null==d.currentLayerVideoIsPlaying||d.currentLayerVideoIsPlaying.attr("id")==u.attr("id"))&&a.unToggleState(u.data("videotoggledby"))),0==e.data&&1==u.data("nextslideatend")?(u.data("nextslideatend-triggered",1),d.c.revnext(),s(u,d)):(s(u,d),d.videoplaying=!1,r.trigger("starttimer"),d.c.trigger("revolution.slide.onvideostop",o(v,"youtube",u.data())),(null==d.currentLayerVideoIsPlaying||d.currentLayerVideoIsPlaying.attr("id")==u.attr("id"))&&a.unToggleState(u.data("videotoggledby")))}},onReady:function(e){var a=e.target.getVideoEmbedCode(),d=jQuery("#"+a.split('id="')[1].split('"')[0]),o=d.parent(),n=o.data("videorate");if(o.data("videostart"),o.addClass("rs-apiready"),null!=n&&e.target.setPlaybackRate(parseFloat(n)),o.find(".tp-videoposter").off("click"),o.find(".tp-videoposter").on("click",function(){i||g.playVideo()}),o.data("startvideonow")){o.data("player").playVideo();var r=t(o.data("videostartat"));-1!=r&&o.data("player").seekTo(r)}o.data("videolistenerexist",1)}}});e.data("player",g);break;case"vimeo":for(var f,y=r.attr("src"),m={},h=y,b=/([^&=]+)=([^&]*)/g;f=b.exec(h);)m[decodeURIComponent(f[1])]=decodeURIComponent(f[2]);y=null!=m.player_id?y.replace(m.player_id,u):y+"&player_id="+u;try{y=y.replace("api=0","api=1")}catch(e){}y+="&api=1",r.attr("src",y),g=e.find("iframe")[0];var w=(jQuery("#"+u),$f(u));w.addEvent("ready",function(){if(e.addClass("rs-apiready"),w.addEvent("play",function(t){e.data("nextslidecalled",0),punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),d.c.trigger("revolution.slide.onvideoplay",o(w,"vimeo",e.data())),d.videoplaying=!0,l(e,d),c?d.c.trigger("stoptimer"):d.videoplaying=!1,"mute"==e.data("volume")||a.lastToggleState(e.data("videomutetoggledby"))?w.api("setVolume","0"):w.api("setVolume",parseInt(e.data("volume"),0)/100||.75),a.toggleState(e.data("videotoggledby"))}),w.addEvent("playProgress",function(a){var i=t(e.data("videoendat"));if(e.data("currenttime",a.seconds),0!=i&&Math.abs(i-a.seconds)<.3&&i>a.seconds&&1!=e.data("nextslidecalled"))if(p){w.api("play");var o=t(e.data("videostartat"));-1!=o&&w.api("seekTo",o)}else 1==e.data("nextslideatend")&&(e.data("nextslideatend-triggered",1),e.data("nextslidecalled",1),d.c.revnext()),w.api("pause")}),w.addEvent("finish",function(t){s(e,d),d.videoplaying=!1,d.c.trigger("starttimer"),d.c.trigger("revolution.slide.onvideostop",o(w,"vimeo",e.data())),1==e.data("nextslideatend")&&(e.data("nextslideatend-triggered",1),d.c.revnext()),(null==d.currentLayerVideoIsPlaying||d.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&a.unToggleState(e.data("videotoggledby"))}),w.addEvent("pause",function(t){e.find(".tp-videoposter").length>0&&"on"==e.data("showcoveronpause")&&(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),d.videoplaying=!1,s(e,d),d.c.trigger("starttimer"),d.c.trigger("revolution.slide.onvideostop",o(w,"vimeo",e.data())),(null==d.currentLayerVideoIsPlaying||d.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&a.unToggleState(e.data("videotoggledby"))}),e.find(".tp-videoposter").off("click"),e.find(".tp-videoposter").on("click",function(){return i?void 0:(w.api("play"),!1)}),e.data("startvideonow")){w.api("play");var n=t(e.data("videostartat"));-1!=n&&w.api("seekTo",n)}e.data("videolistenerexist",1)})}else{var T=t(e.data("videostartat"));switch(e.data("videotype")){case"youtube":n&&(e.data("player").playVideo(),-1!=T&&e.data("player").seekTo());break;case"vimeo":n&&(w=$f(e.find("iframe").attr("id")),w.api("play"),-1!=T&&w.api("seekTo",T))}}},r=function(e,n,r){if(i&&1==e.data("disablevideoonmobile"))return!1;var u=e.find("video"),p=u[0],c=u.parent(),v=e.data("videoloop"),g="loopandnoslidestop"!=v;if(v="loop"==v||"loopandnoslidestop"==v,c.data("metaloaded",1),null==u.attr("control")&&(0!=e.find(".tp-video-play-button").length||i||e.append('<div class="tp-video-play-button"><i class="revicon-right-dir"></i><span class="tp-revstop">&nbsp;</span></div>'),e.find("video, .tp-poster, .tp-video-play-button").on("click",function(){e.hasClass("videoisplaying")?p.pause():p.play()})),1==e.data("forcecover")||e.hasClass("fullscreenvideo")||1==e.data("bgvideo"))if(1==e.data("forcecover")||1==e.data("bgvideo")){c.addClass("fullcoveredvideo");var f=e.data("aspectratio")||"4:3";a.prepareCoveredVideo(f,n,e)}else c.addClass("fullscreenvideo");var y=e.find(".tp-vid-play-pause")[0],m=e.find(".tp-vid-mute")[0],h=e.find(".tp-vid-full-screen")[0],b=e.find(".tp-seek-bar")[0],w=e.find(".tp-volume-bar")[0];null!=y&&d(y,"click",function(){1==p.paused?p.play():p.pause()}),null!=m&&d(m,"click",function(){0==p.muted?(p.muted=!0,m.innerHTML="Unmute"):(p.muted=!1,m.innerHTML="Mute")}),null!=h&&h&&d(h,"click",function(){p.requestFullscreen?p.requestFullscreen():p.mozRequestFullScreen?p.mozRequestFullScreen():p.webkitRequestFullscreen&&p.webkitRequestFullscreen()}),null!=b&&(d(b,"change",function(){var e=p.duration*(b.value/100);p.currentTime=e}),d(b,"mousedown",function(){e.addClass("seekbardragged"),p.pause()}),d(b,"mouseup",function(){e.removeClass("seekbardragged"),p.play()})),d(p,"timeupdate",function(){var a=100/p.duration*p.currentTime,i=t(e.data("videoendat")),d=p.currentTime;if(null!=b&&(b.value=a),0!=i&&-1!=i&&Math.abs(i-d)<=.3&&i>d&&1!=e.data("nextslidecalled"))if(v){p.play();var o=t(e.data("videostartat"));-1!=o&&(p.currentTime=o)}else 1==e.data("nextslideatend")&&(e.data("nextslideatend-triggered",1),e.data("nextslidecalled",1),n.just_called_nextslide_at_htmltimer=!0,n.c.revnext(),setTimeout(function(){n.just_called_nextslide_at_htmltimer=!1},1e3)),p.pause()}),null!=w&&d(w,"change",function(){p.volume=w.value}),d(p,"play",function(){e.data("nextslidecalled",0),"mute"==e.data("volume")&&(p.muted=!0),e.addClass("videoisplaying"),l(e,n),g?(n.videoplaying=!0,n.c.trigger("stoptimer"),n.c.trigger("revolution.slide.onvideoplay",o(p,"html5",e.data()))):(n.videoplaying=!1,n.c.trigger("starttimer"),n.c.trigger("revolution.slide.onvideostop",o(p,"html5",e.data()))),punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("video"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});var t=e.find(".tp-vid-play-pause")[0],i=e.find(".tp-vid-mute")[0];null!=t&&(t.innerHTML="Pause"),null!=i&&p.muted&&(i.innerHTML="Unmute"),a.toggleState(e.data("videotoggledby"))}),d(p,"pause",function(){e.find(".tp-videoposter").length>0&&"on"==e.data("showcoveronpause")&&!e.hasClass("seekbardragged")&&(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("video"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),e.removeClass("videoisplaying"),n.videoplaying=!1,s(e,n),n.c.trigger("starttimer"),n.c.trigger("revolution.slide.onvideostop",o(p,"html5",e.data()));var t=e.find(".tp-vid-play-pause")[0];null!=t&&(t.innerHTML="Play"),(null==n.currentLayerVideoIsPlaying||n.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&a.unToggleState(e.data("videotoggledby"))}),d(p,"ended",function(){s(e,n),n.videoplaying=!1,s(e,n),n.c.trigger("starttimer"),n.c.trigger("revolution.slide.onvideostop",o(p,"html5",e.data())),1==e.data("nextslideatend")&&(1==!n.just_called_nextslide_at_htmltimer&&(e.data("nextslideatend-triggered",1),n.c.revnext(),n.just_called_nextslide_at_htmltimer=!0),setTimeout(function(){n.just_called_nextslide_at_htmltimer=!1},1500)),e.removeClass("videoisplaying")})},l=function(e,t){null==t.playingvideos&&(t.playingvideos=new Array),e.data("stopallvideos")&&null!=t.playingvideos&&t.playingvideos.length>0&&(t.lastplayedvideos=jQuery.extend(!0,[],t.playingvideos),jQuery.each(t.playingvideos,function(e,i){a.stopVideo(i,t)})),t.playingvideos.push(e),t.currentLayerVideoIsPlaying=e},s=function(e,t){null!=t.playingvideos&&t.playingvideos.splice(jQuery.inArray(e,t.playingvideos),1)}}(jQuery);